<header class="site-header">
    <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 830 50" preserveAspectRatio="none" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1;">
        <polygon points="0,0 830,0 0,50" fill="#2b235f" />
        <polygon points="0,50 830,0 830,50" fill="#d92523" />
    </svg>
    <div class="slogan-strip">
        <span class="slogan-left">‡§Æ‡§æ‡§®‡§µ ‡§π‡§ø‡§§ ‡§∏‡§∞‡•ç‡§µ‡•ã‡§™‡§∞‡§ø</span>
        <span class="slogan-center">‡§∏‡§§‡•ç‡§Ø‡§Æ‡•á‡§µ ‡§ú‡§Ø‡§§‡•á</span>
        <span class="slogan-right">‡§®‡•ç‡§Ø‡§æ‡§Ø ‡§π‡•Ä ‡§ß‡§∞‡•ç‡§Æ ‡§π‡•à</span>
    </div>
    <div class="main-header">
        <div class="logo">
            <a href="/"><img src="/images/logo.jpeg" alt="Organization Logo" data-key="logo_alt" data-attr="alt"></a>
        </div>
        <div class="org-name-container">
            <h1 id="org-name" data-key="org_name">National Human Rights Association</h1>
        </div>
        <div class="header-right-placeholder"></div> <!-- To balance the flexbox -->
    </div>
    <div class="nav-bar">
        <button class="hamburger" aria-label="Toggle navigation menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <nav>
            <ul>
                <li><a href="/" data-key="nav_home">Home</a></li>
                <li><a href="/about" data-key="nav_about">About Us</a></li>
                <li><a href="/team" data-key="nav_team">Our Team</a></li>
                <li><a href="/activities" data-key="nav_activities">Activities</a></li>
                <li><a href="/news" data-key="nav_news">News</a></li>
                <li><a href="/gallery" data-key="nav_gallery">Gallery</a></li>
                <li><a href="/join" data-key="nav_join">Join Us</a></li>
                <li><a href="/documents/request-download">ID Card / Joining Letter</a></li>
                <li><a href="/contact" data-key="nav_contact">Contact Us</a></li>
                <!-- Admin Login Link -->
                <li><a href="/admin/login" style="color: #d92523; font-weight: bold;">üîê Admin Login</a></li>
            </ul>
        </nav>
        <div class="search-bar">
            <input type="text" placeholder="Search..." data-key="search_placeholder" data-attr="placeholder">
            <i class="search-icon"></i>
        </div>
        <div class="lang-toggle">
            <select id="language-selector">
                <option value="hi">HI</option>
                <option value="en">EN</option>
                <option value="ur">UR</option>
            </select>
        </div>
    </div>
</header>

<script>
// Language switching functionality
let translations = {};

async function loadTranslations() {
    try {
        const response = await fetch('/translations.json');
        translations = await response.json();
        console.log('Translations loaded:', translations);
    } catch (error) {
        console.error('Error loading translations:', error);
    }
}

function setLanguage(lang) {
    // Store language preference
    localStorage.setItem('preferredLanguage', lang);

    // Set body class for RTL support
    document.body.className = lang === 'ur' ? 'rtl' : '';

    // Update all elements with data-key
    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (translations[lang] && translations[lang][key]) {
            const translation = translations[lang][key];

            // Handle different element types
            if (element.tagName === 'INPUT' && element.getAttribute('data-attr') === 'placeholder') {
                element.placeholder = translation;
            } else if (element.tagName === 'IMG' && element.getAttribute('data-attr') === 'alt') {
                element.alt = translation;
            } else {
                element.textContent = translation;
                // Set lang attribute and dir for mission and vision statements
                if (key === 'mission_statement' || key === 'vision_statement') {
                    element.setAttribute('lang', lang);
                    if (lang === 'ur') {
                        element.setAttribute('dir', 'rtl');
                    } else {
                        element.removeAttribute('dir');
                    }
                }
            }
        }
    });

    // Update select value
    document.getElementById('language-selector').value = lang;
}

document.addEventListener('DOMContentLoaded', async function() {
    await loadTranslations();

    const languageSelector = document.getElementById('language-selector');

    // Set initial language from localStorage or default to Hindi
    const savedLang = localStorage.getItem('preferredLanguage') || 'hi';
    setLanguage(savedLang);

    // Handle language change
    languageSelector.addEventListener('change', function() {
        setLanguage(this.value);
    });
});
</script>
