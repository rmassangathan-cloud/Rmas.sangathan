<section class="join-us-page">
    <div class="container">
        <div class="join-card">
            <div class="join-card-left">
                <h2>Join NHRA</h2>
                <p class="lead">समाज के लिए कार्य करें — सदस्यता के लिए आवेदन करें। नीचे दी गई जानकारी भरें।</p>

                <% if (typeof success !== 'undefined' && success) { %>
                    <div class="alert success"><%= success %></div>
                <% } %>
                <% if (typeof error !== 'undefined' && error) { %>
                    <div class="alert error"><%= error %></div>
                <% } %>

                <form id="membershipForm" class="membership-form" method="POST" action="/join" enctype="multipart/form-data" novalidate>
                    <div class="form-row two-col">
                        <label>पूर्ण नाम / Full Name *</label>
                        <input name="fullName" required value="<%= typeof fullName !== 'undefined' ? fullName : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>पिता / पति का नाम</label>
                        <input name="fatherName" value="<%= typeof fatherName !== 'undefined' ? fatherName : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>जन्म तिथि / Date of Birth</label>
                        <input type="date" name="dob" value="<%= typeof dob !== 'undefined' ? dob : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>लिंग / Gender</label>
                        <select name="gender">
                            <option value="" <%= (typeof gender === 'undefined' || !gender) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="male" <%= (typeof gender !== 'undefined' && gender === 'male') ? 'selected' : '' %>>पुरुष / Male</option>
                            <option value="female" <%= (typeof gender !== 'undefined' && gender === 'female') ? 'selected' : '' %>>महिला / Female</option>
                            <option value="other" <%= (typeof gender !== 'undefined' && gender === 'other') ? 'selected' : '' %>>अन्य / Other</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>मोबाइल नंबर / Mobile *</label>
                        <input name="mobile" required value="<%= typeof mobile !== 'undefined' ? mobile : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>ईमेल / Email</label>
                        <input type="email" name="email" value="<%= typeof email !== 'undefined' ? email : '' %>">
                    </div>

                    

                    <div class="form-row two-col">
                        <label>Blood Group</label>
                        <select name="bloodGroup">
                            <option value="" <%= (typeof bloodGroup === 'undefined' || !bloodGroup) ? 'selected' : '' %>>-- Select --</option>
                            <option value="A+" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'A+') ? 'selected' : '' %>>A+</option>
                            <option value="A-" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'A-') ? 'selected' : '' %>>A-</option>
                            <option value="B+" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'B+') ? 'selected' : '' %>>B+</option>
                            <option value="B-" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'B-') ? 'selected' : '' %>>B-</option>
                            <option value="O+" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'O+') ? 'selected' : '' %>>O+</option>
                            <option value="O-" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'O-') ? 'selected' : '' %>>O-</option>
                            <option value="AB+" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'AB+') ? 'selected' : '' %>>AB+</option>
                            <option value="AB-" <%= (typeof bloodGroup !== 'undefined' && bloodGroup === 'AB-') ? 'selected' : '' %>>AB-</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>शैक्षणिक योग्यता / Education</label>
                        <select name="education">
                            <option value="" <%= (typeof education === 'undefined' || !education) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="None" <%= (typeof education !== 'undefined' && education === 'None') ? 'selected' : '' %>>None</option>
                            <option value="Primary" <%= (typeof education !== 'undefined' && education === 'Primary') ? 'selected' : '' %>>Primary</option>
                            <option value="Secondary" <%= (typeof education !== 'undefined' && education === 'Secondary') ? 'selected' : '' %>>Secondary</option>
                            <option value="Higher Secondary" <%= (typeof education !== 'undefined' && education === 'Higher Secondary') ? 'selected' : '' %>>Higher Secondary</option>
                            <option value="Diploma" <%= (typeof education !== 'undefined' && education === 'Diploma') ? 'selected' : '' %>>Diploma</option>
                            <option value="Bachelor" <%= (typeof education !== 'undefined' && education === 'Bachelor') ? 'selected' : '' %>>Bachelor</option>
                            <option value="Master" <%= (typeof education !== 'undefined' && education === 'Master') ? 'selected' : '' %>>Master</option>
                            <option value="PhD" <%= (typeof education !== 'undefined' && education === 'PhD') ? 'selected' : '' %>>PhD</option>
                            <option value="Other" <%= (typeof education !== 'undefined' && education === 'Other') ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>पेशा / Occupation</label>
                        <select name="occupation">
                            <option value="" <%= (typeof occupation === 'undefined' || !occupation) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="Student" <%= (typeof occupation !== 'undefined' && occupation === 'Student') ? 'selected' : '' %>>Student</option>
                            <option value="Unemployed" <%= (typeof occupation !== 'undefined' && occupation === 'Unemployed') ? 'selected' : '' %>>Unemployed</option>
                            <option value="Farmer / Agriculture" <%= (typeof occupation !== 'undefined' && occupation === 'Farmer / Agriculture') ? 'selected' : '' %>>Farmer / Agriculture</option>
                            <option value="Labour / Daily Wage Worker" <%= (typeof occupation !== 'undefined' && occupation === 'Labour / Daily Wage Worker') ? 'selected' : '' %>>Labour / Daily Wage Worker</option>
                            <option value="Private Job" <%= (typeof occupation !== 'undefined' && occupation === 'Private Job') ? 'selected' : '' %>>Private Job</option>
                            <option value="Government Job" <%= (typeof occupation !== 'undefined' && occupation === 'Government Job') ? 'selected' : '' %>>Government Job</option>
                            <option value="Self Employed" <%= (typeof occupation !== 'undefined' && occupation === 'Self Employed') ? 'selected' : '' %>>Self Employed</option>
                            <option value="Business / Trader" <%= (typeof occupation !== 'undefined' && occupation === 'Business / Trader') ? 'selected' : '' %>>Business / Trader</option>
                            <option value="Teacher / Professor" <%= (typeof occupation !== 'undefined' && occupation === 'Teacher / Professor') ? 'selected' : '' %>>Teacher / Professor</option>
                            <option value="Doctor / Medical Professional" <%= (typeof occupation !== 'undefined' && occupation === 'Doctor / Medical Professional') ? 'selected' : '' %>>Doctor / Medical Professional</option>
                            <option value="Engineer / IT Professional" <%= (typeof occupation !== 'undefined' && occupation === 'Engineer / IT Professional') ? 'selected' : '' %>>Engineer / IT Professional</option>
                            <option value="Lawyer" <%= (typeof occupation !== 'undefined' && occupation === 'Lawyer') ? 'selected' : '' %>>Lawyer</option>
                            <option value="Journalist / Media" <%= (typeof occupation !== 'undefined' && occupation === 'Journalist / Media') ? 'selected' : '' %>>Journalist / Media</option>
                            <option value="Social Worker / NGO" <%= (typeof occupation !== 'undefined' && occupation === 'Social Worker / NGO') ? 'selected' : '' %>>Social Worker / NGO</option>
                            <option value="Artist / Writer" <%= (typeof occupation !== 'undefined' && occupation === 'Artist / Writer') ? 'selected' : '' %>>Artist / Writer</option>
                            <option value="Driver" <%= (typeof occupation !== 'undefined' && occupation === 'Driver') ? 'selected' : '' %>>Driver</option>
                            <option value="Housewife / Homemaker" <%= (typeof occupation !== 'undefined' && occupation === 'Housewife / Homemaker') ? 'selected' : '' %>>Housewife / Homemaker</option>
                            <option value="Retired" <%= (typeof occupation !== 'undefined' && occupation === 'Retired') ? 'selected' : '' %>>Retired</option>
                            <option value="Other" <%= (typeof occupation !== 'undefined' && occupation === 'Other') ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>पहचान प्रमाण (Aadhaar / ID No.)</label>
                        <input name="idNumber" value="<%= typeof idNumber !== 'undefined' ? idNumber : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>राज्य / State *</label>
                        <select name="state" id="stateSelect" required>
                            <option value="" <%= (typeof state === 'undefined' || !state) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="Bihar" <%= (typeof state !== 'undefined' && state === 'Bihar') ? 'selected' : '' %>>Bihar</option>
                            <option value="Andhra Pradesh" <%= (typeof state !== 'undefined' && state === 'Andhra Pradesh') ? 'selected' : '' %>>Andhra Pradesh</option>
                            <option value="Arunachal Pradesh" <%= (typeof state !== 'undefined' && state === 'Arunachal Pradesh') ? 'selected' : '' %>>Arunachal Pradesh</option>
                            <option value="Assam" <%= (typeof state !== 'undefined' && state === 'Assam') ? 'selected' : '' %>>Assam</option>
                            <option value="Chhattisgarh" <%= (typeof state !== 'undefined' && state === 'Chhattisgarh') ? 'selected' : '' %>>Chhattisgarh</option>
                            <option value="Goa" <%= (typeof state !== 'undefined' && state === 'Goa') ? 'selected' : '' %>>Goa</option>
                            <option value="Gujarat" <%= (typeof state !== 'undefined' && state === 'Gujarat') ? 'selected' : '' %>>Gujarat</option>
                            <option value="Haryana" <%= (typeof state !== 'undefined' && state === 'Haryana') ? 'selected' : '' %>>Haryana</option>
                            <option value="Himachal Pradesh" <%= (typeof state !== 'undefined' && state === 'Himachal Pradesh') ? 'selected' : '' %>>Himachal Pradesh</option>
                            <option value="Jharkhand" <%= (typeof state !== 'undefined' && state === 'Jharkhand') ? 'selected' : '' %>>Jharkhand</option>
                            <option value="Karnataka" <%= (typeof state !== 'undefined' && state === 'Karnataka') ? 'selected' : '' %>>Karnataka</option>
                            <option value="Kerala" <%= (typeof state !== 'undefined' && state === 'Kerala') ? 'selected' : '' %>>Kerala</option>
                            <option value="Madhya Pradesh" <%= (typeof state !== 'undefined' && state === 'Madhya Pradesh') ? 'selected' : '' %>>Madhya Pradesh</option>
                            <option value="Maharashtra" <%= (typeof state !== 'undefined' && state === 'Maharashtra') ? 'selected' : '' %>>Maharashtra</option>
                            <option value="Manipur" <%= (typeof state !== 'undefined' && state === 'Manipur') ? 'selected' : '' %>>Manipur</option>
                            <option value="Meghalaya" <%= (typeof state !== 'undefined' && state === 'Meghalaya') ? 'selected' : '' %>>Meghalaya</option>
                            <option value="Mizoram" <%= (typeof state !== 'undefined' && state === 'Mizoram') ? 'selected' : '' %>>Mizoram</option>
                            <option value="Nagaland" <%= (typeof state !== 'undefined' && state === 'Nagaland') ? 'selected' : '' %>>Nagaland</option>
                            <option value="Odisha" <%= (typeof state !== 'undefined' && state === 'Odisha') ? 'selected' : '' %>>Odisha</option>
                            <option value="Punjab" <%= (typeof state !== 'undefined' && state === 'Punjab') ? 'selected' : '' %>>Punjab</option>
                            <option value="Rajasthan" <%= (typeof state !== 'undefined' && state === 'Rajasthan') ? 'selected' : '' %>>Rajasthan</option>
                            <option value="Sikkim" <%= (typeof state !== 'undefined' && state === 'Sikkim') ? 'selected' : '' %>>Sikkim</option>
                            <option value="Tamil Nadu" <%= (typeof state !== 'undefined' && state === 'Tamil Nadu') ? 'selected' : '' %>>Tamil Nadu</option>
                            <option value="Telangana" <%= (typeof state !== 'undefined' && state === 'Telangana') ? 'selected' : '' %>>Telangana</option>
                            <option value="Tripura" <%= (typeof state !== 'undefined' && state === 'Tripura') ? 'selected' : '' %>>Tripura</option>
                            <option value="Uttar Pradesh" <%= (typeof state !== 'undefined' && state === 'Uttar Pradesh') ? 'selected' : '' %>>Uttar Pradesh</option>
                            <option value="Uttarakhand" <%= (typeof state !== 'undefined' && state === 'Uttarakhand') ? 'selected' : '' %>>Uttarakhand</option>
                            <option value="West Bengal" <%= (typeof state !== 'undefined' && state === 'West Bengal') ? 'selected' : '' %>>West Bengal</option>
                            <option value="Andaman and Nicobar Islands" <%= (typeof state !== 'undefined' && state === 'Andaman and Nicobar Islands') ? 'selected' : '' %>>Andaman and Nicobar Islands</option>
                            <option value="Chandigarh" <%= (typeof state !== 'undefined' && state === 'Chandigarh') ? 'selected' : '' %>>Chandigarh</option>
                            <option value="Dadra and Nagar Haveli and Daman and Diu" <%= (typeof state !== 'undefined' && state === 'Dadra and Nagar Haveli and Daman and Diu') ? 'selected' : '' %>>Dadra and Nagar Haveli and Daman and Diu</option>
                            <option value="Delhi" <%= (typeof state !== 'undefined' && state === 'Delhi') ? 'selected' : '' %>>Delhi</option>
                            <option value="Jammu and Kashmir" <%= (typeof state !== 'undefined' && state === 'Jammu and Kashmir') ? 'selected' : '' %>>Jammu and Kashmir</option>
                            <option value="Ladakh" <%= (typeof state !== 'undefined' && state === 'Ladakh') ? 'selected' : '' %>>Ladakh</option>
                            <option value="Lakshadweep" <%= (typeof state !== 'undefined' && state === 'Lakshadweep') ? 'selected' : '' %>>Lakshadweep</option>
                        </select>
                    </div>

                    

                    <div class="form-row two-col">
                        <label>परमंडल / Division *</label>
                        <select name="division" required>
                            <option value="" <%= (typeof division === 'undefined' || !division) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="Patna" <%= (typeof division !== 'undefined' && division === 'Patna') ? 'selected' : '' %>>Patna</option>
                            <option value="Tirhut" <%= (typeof division !== 'undefined' && division === 'Tirhut') ? 'selected' : '' %>>Tirhut</option>
                            <option value="Saran" <%= (typeof division !== 'undefined' && division === 'Saran') ? 'selected' : '' %>>Saran</option>
                            <option value="Darbhanga" <%= (typeof division !== 'undefined' && division === 'Darbhanga') ? 'selected' : '' %>>Darbhanga</option>
                            <option value="Kosi" <%= (typeof division !== 'undefined' && division === 'Kosi') ? 'selected' : '' %>>Kosi</option>
                            <option value="Purnia" <%= (typeof division !== 'undefined' && division === 'Purnia') ? 'selected' : '' %>>Purnia</option>
                            <option value="Bhagalpur" <%= (typeof division !== 'undefined' && division === 'Bhagalpur') ? 'selected' : '' %>>Bhagalpur</option>
                            <option value="Munger" <%= (typeof division !== 'undefined' && division === 'Munger') ? 'selected' : '' %>>Munger</option>
                            <option value="Magadh" <%= (typeof division !== 'undefined' && division === 'Magadh') ? 'selected' : '' %>>Magadh</option>
                            <option value="Delhi" <%= (typeof division !== 'undefined' && division === 'Delhi') ? 'selected' : '' %>>Delhi</option>
                            <option value="Mumbai" <%= (typeof division !== 'undefined' && division === 'Mumbai') ? 'selected' : '' %>>Mumbai</option>
                            <option value="Kolkata" <%= (typeof division !== 'undefined' && division === 'Kolkata') ? 'selected' : '' %>>Kolkata</option>
                            <option value="Chennai" <%= (typeof division !== 'undefined' && division === 'Chennai') ? 'selected' : '' %>>Chennai</option>
                            <option value="Hyderabad" <%= (typeof division !== 'undefined' && division === 'Hyderabad') ? 'selected' : '' %>>Hyderabad</option>
                            <option value="Bangalore" <%= (typeof division !== 'undefined' && division === 'Bangalore') ? 'selected' : '' %>>Bangalore</option>
                            <option value="Ahmedabad" <%= (typeof division !== 'undefined' && division === 'Ahmedabad') ? 'selected' : '' %>>Ahmedabad</option>
                            <option value="Pune" <%= (typeof division !== 'undefined' && division === 'Pune') ? 'selected' : '' %>>Pune</option>
                            <option value="Jaipur" <%= (typeof division !== 'undefined' && division === 'Jaipur') ? 'selected' : '' %>>Jaipur</option>
                            <option value="Lucknow" <%= (typeof division !== 'undefined' && division === 'Lucknow') ? 'selected' : '' %>>Lucknow</option>
                            <option value="Kanpur" <%= (typeof division !== 'undefined' && division === 'Kanpur') ? 'selected' : '' %>>Kanpur</option>
                            <option value="Nagpur" <%= (typeof division !== 'undefined' && division === 'Nagpur') ? 'selected' : '' %>>Nagpur</option>
                            <option value="Indore" <%= (typeof division !== 'undefined' && division === 'Indore') ? 'selected' : '' %>>Indore</option>
                            <option value="Bhopal" <%= (typeof division !== 'undefined' && division === 'Bhopal') ? 'selected' : '' %>>Bhopal</option>
                            <option value="Patiala" <%= (typeof division !== 'undefined' && division === 'Patiala') ? 'selected' : '' %>>Patiala</option>
                            <option value="Amritsar" <%= (typeof division !== 'undefined' && division === 'Amritsar') ? 'selected' : '' %>>Amritsar</option>
                            <option value="Jalandhar" <%= (typeof division !== 'undefined' && division === 'Jalandhar') ? 'selected' : '' %>>Jalandhar</option>
                            <option value="Chandigarh" <%= (typeof division !== 'undefined' && division === 'Chandigarh') ? 'selected' : '' %>>Chandigarh</option>
                            <option value="Shimla" <%= (typeof division !== 'undefined' && division === 'Shimla') ? 'selected' : '' %>>Shimla</option>
                            <option value="Dehradun" <%= (typeof division !== 'undefined' && division === 'Dehradun') ? 'selected' : '' %>>Dehradun</option>
                            <option value="Gangtok" <%= (typeof division !== 'undefined' && division === 'Gangtok') ? 'selected' : '' %>>Gangtok</option>
                            <option value="Itanagar" <%= (typeof division !== 'undefined' && division === 'Itanagar') ? 'selected' : '' %>>Itanagar</option>
                            <option value="Dispur" <%= (typeof division !== 'undefined' && division === 'Dispur') ? 'selected' : '' %>>Dispur</option>
                            <option value="Panaji" <%= (typeof division !== 'undefined' && division === 'Panaji') ? 'selected' : '' %>>Panaji</option>
                            <option value="Raipur" <%= (typeof division !== 'undefined' && division === 'Raipur') ? 'selected' : '' %>>Raipur</option>
                            <option value="Ranchi" <%= (typeof division !== 'undefined' && division === 'Ranchi') ? 'selected' : '' %>>Ranchi</option>
                            <option value="Bhubaneswar" <%= (typeof division !== 'undefined' && division === 'Bhubaneswar') ? 'selected' : '' %>>Bhubaneswar</option>
                            <option value="Thiruvananthapuram" <%= (typeof division !== 'undefined' && division === 'Thiruvananthapuram') ? 'selected' : '' %>>Thiruvananthapuram</option>
                            <option value="Other" <%= (typeof division !== 'undefined' && division === 'Other') ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>ज़िला / District *</label>
                        <select name="district" required>
                            <option value="" <%= (typeof district === 'undefined' || !district) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="Patna" <%= (typeof district !== 'undefined' && district === 'Patna') ? 'selected' : '' %>>Patna</option>
                            <option value="Nalanda" <%= (typeof district !== 'undefined' && district === 'Nalanda') ? 'selected' : '' %>>Nalanda</option>
                            <option value="Bhojpur" <%= (typeof district !== 'undefined' && district === 'Bhojpur') ? 'selected' : '' %>>Bhojpur</option>
                            <option value="Rohtas" <%= (typeof district !== 'undefined' && district === 'Rohtas') ? 'selected' : '' %>>Rohtas</option>
                            <option value="Buxar" <%= (typeof district !== 'undefined' && district === 'Buxar') ? 'selected' : '' %>>Buxar</option>
                            <option value="Kaimur" <%= (typeof district !== 'undefined' && district === 'Kaimur') ? 'selected' : '' %>>Kaimur</option>
                            <option value="Gaya" <%= (typeof district !== 'undefined' && district === 'Gaya') ? 'selected' : '' %>>Gaya</option>
                            <option value="Jehanabad" <%= (typeof district !== 'undefined' && district === 'Jehanabad') ? 'selected' : '' %>>Jehanabad</option>
                            <option value="Arwal" <%= (typeof district !== 'undefined' && district === 'Arwal') ? 'selected' : '' %>>Arwal</option>
                            <option value="Aurangabad" <%= (typeof district !== 'undefined' && district === 'Aurangabad') ? 'selected' : '' %>>Aurangabad</option>
                            <option value="Saran" <%= (typeof district !== 'undefined' && district === 'Saran') ? 'selected' : '' %>>Saran</option>
                            <option value="Siwan" <%= (typeof district !== 'undefined' && district === 'Siwan') ? 'selected' : '' %>>Siwan</option>
                            <option value="Gopalganj" <%= (typeof district !== 'undefined' && district === 'Gopalganj') ? 'selected' : '' %>>Gopalganj</option>
                            <option value="Muzaffarpur" <%= (typeof district !== 'undefined' && district === 'Muzaffarpur') ? 'selected' : '' %>>Muzaffarpur</option>
                            <option value="East Champaran" <%= (typeof district !== 'undefined' && district === 'East Champaran') ? 'selected' : '' %>>East Champaran</option>
                            <option value="West Champaran" <%= (typeof district !== 'undefined' && district === 'West Champaran') ? 'selected' : '' %>>West Champaran</option>
                            <option value="Sitamarhi" <%= (typeof district !== 'undefined' && district === 'Sitamarhi') ? 'selected' : '' %>>Sitamarhi</option>
                            <option value="Sheohar" <%= (typeof district !== 'undefined' && district === 'Sheohar') ? 'selected' : '' %>>Sheohar</option>
                            <option value="Vaishali" <%= (typeof district !== 'undefined' && district === 'Vaishali') ? 'selected' : '' %>>Vaishali</option>
                            <option value="Darbhanga" <%= (typeof district !== 'undefined' && district === 'Darbhanga') ? 'selected' : '' %>>Darbhanga</option>
                            <option value="Madhubani" <%= (typeof district !== 'undefined' && district === 'Madhubani') ? 'selected' : '' %>>Madhubani</option>
                            <option value="Samastipur" <%= (typeof district !== 'undefined' && district === 'Samastipur') ? 'selected' : '' %>>Samastipur</option>
                            <option value="Begusarai" <%= (typeof district !== 'undefined' && district === 'Begusarai') ? 'selected' : '' %>>Begusarai</option>
                            <option value="Khagaria" <%= (typeof district !== 'undefined' && district === 'Khagaria') ? 'selected' : '' %>>Khagaria</option>
                            <option value="Saharsa" <%= (typeof district !== 'undefined' && district === 'Saharsa') ? 'selected' : '' %>>Saharsa</option>
                            <option value="Madhepura" <%= (typeof district !== 'undefined' && district === 'Madhepura') ? 'selected' : '' %>>Madhepura</option>
                            <option value="Supaul" <%= (typeof district !== 'undefined' && district === 'Supaul') ? 'selected' : '' %>>Supaul</option>
                            <option value="Araria" <%= (typeof district !== 'undefined' && district === 'Araria') ? 'selected' : '' %>>Araria</option>
                            <option value="Kishanganj" <%= (typeof district !== 'undefined' && district === 'Kishanganj') ? 'selected' : '' %>>Kishanganj</option>
                            <option value="Purnia" <%= (typeof district !== 'undefined' && district === 'Purnia') ? 'selected' : '' %>>Purnia</option>
                            <option value="Katihar" <%= (typeof district !== 'undefined' && district === 'Katihar') ? 'selected' : '' %>>Katihar</option>
                            <option value="Bhagalpur" <%= (typeof district !== 'undefined' && district === 'Bhagalpur') ? 'selected' : '' %>>Bhagalpur</option>
                            <option value="Banka" <%= (typeof district !== 'undefined' && district === 'Banka') ? 'selected' : '' %>>Banka</option>
                            <option value="Munger" <%= (typeof district !== 'undefined' && district === 'Munger') ? 'selected' : '' %>>Munger</option>
                            <option value="Lakhisarai" <%= (typeof district !== 'undefined' && district === 'Lakhisarai') ? 'selected' : '' %>>Lakhisarai</option>
                            <option value="Sheikhpura" <%= (typeof district !== 'undefined' && district === 'Sheikhpura') ? 'selected' : '' %>>Sheikhpura</option>
                            <option value="Jamui" <%= (typeof district !== 'undefined' && district === 'Jamui') ? 'selected' : '' %>>Jamui</option>
                            <option value="Delhi" <%= (typeof district !== 'undefined' && district === 'Delhi') ? 'selected' : '' %>>Delhi</option>
                            <option value="Mumbai" <%= (typeof district !== 'undefined' && district === 'Mumbai') ? 'selected' : '' %>>Mumbai</option>
                            <option value="Kolkata" <%= (typeof district !== 'undefined' && district === 'Kolkata') ? 'selected' : '' %>>Kolkata</option>
                            <option value="Chennai" <%= (typeof district !== 'undefined' && district === 'Chennai') ? 'selected' : '' %>>Chennai</option>
                            <option value="Bangalore" <%= (typeof district !== 'undefined' && district === 'Bangalore') ? 'selected' : '' %>>Bangalore</option>
                            <option value="Hyderabad" <%= (typeof district !== 'undefined' && district === 'Hyderabad') ? 'selected' : '' %>>Hyderabad</option>
                            <option value="Ahmedabad" <%= (typeof district !== 'undefined' && district === 'Ahmedabad') ? 'selected' : '' %>>Ahmedabad</option>
                            <option value="Pune" <%= (typeof district !== 'undefined' && district === 'Pune') ? 'selected' : '' %>>Pune</option>
                            <option value="Jaipur" <%= (typeof district !== 'undefined' && district === 'Jaipur') ? 'selected' : '' %>>Jaipur</option>
                            <option value="Lucknow" <%= (typeof district !== 'undefined' && district === 'Lucknow') ? 'selected' : '' %>>Lucknow</option>
                            <option value="Kanpur" <%= (typeof district !== 'undefined' && district === 'Kanpur') ? 'selected' : '' %>>Kanpur</option>
                            <option value="Nagpur" <%= (typeof district !== 'undefined' && district === 'Nagpur') ? 'selected' : '' %>>Nagpur</option>
                            <option value="Indore" <%= (typeof district !== 'undefined' && district === 'Indore') ? 'selected' : '' %>>Indore</option>
                            <option value="Bhopal" <%= (typeof district !== 'undefined' && district === 'Bhopal') ? 'selected' : '' %>>Bhopal</option>
                            <option value="Other" <%= (typeof district !== 'undefined' && district === 'Other') ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <div class="form-row two-col">
                        <label>ब्लॉक / Block *</label>
                        <select name="block" required>
                            <option value="" <%= (typeof block === 'undefined' || !block) ? 'selected' : '' %>>-- चुनें / Select --</option>
                            <option value="Athmalgola" <%= (typeof block !== 'undefined' && block === 'Athmalgola') ? 'selected' : '' %>>Athmalgola</option>
                            <option value="Bakhtiarpur" <%= (typeof block !== 'undefined' && block === 'Bakhtiarpur') ? 'selected' : '' %>>Bakhtiarpur</option>
                            <option value="Barh" <%= (typeof block !== 'undefined' && block === 'Barh') ? 'selected' : '' %>>Barh</option>
                            <option value="Belchhi" <%= (typeof block !== 'undefined' && block === 'Belchhi') ? 'selected' : '' %>>Belchhi</option>
                            <option value="Bihta" <%= (typeof block !== 'undefined' && block === 'Bihta') ? 'selected' : '' %>>Bihta</option>
                            <option value="Bikram" <%= (typeof block !== 'undefined' && block === 'Bikram') ? 'selected' : '' %>>Bikram</option>
                            <option value="Danapur" <%= (typeof block !== 'undefined' && block === 'Danapur') ? 'selected' : '' %>>Danapur</option>
                            <option value="Daniawan" <%= (typeof block !== 'undefined' && block === 'Daniawan') ? 'selected' : '' %>>Daniawan</option>
                            <option value="Dhanarua" <%= (typeof block !== 'undefined' && block === 'Dhanarua') ? 'selected' : '' %>>Dhanarua</option>
                            <option value="Dulhin Bazar" <%= (typeof block !== 'undefined' && block === 'Dulhin Bazar') ? 'selected' : '' %>>Dulhin Bazar</option>
                            <option value="Fatuha" <%= (typeof block !== 'undefined' && block === 'Fatuha') ? 'selected' : '' %>>Fatuha</option>
                            <option value="Ghoswari" <%= (typeof block !== 'undefined' && block === 'Ghoswari') ? 'selected' : '' %>>Ghoswari</option>
                            <option value="Khusrupur" <%= (typeof block !== 'undefined' && block === 'Khusrupur') ? 'selected' : '' %>>Khusrupur</option>
                            <option value="Maner" <%= (typeof block !== 'undefined' && block === 'Maner') ? 'selected' : '' %>>Maner</option>
                            <option value="Masaurhi" <%= (typeof block !== 'undefined' && block === 'Masaurhi') ? 'selected' : '' %>>Masaurhi</option>
                            <option value="Mokama" <%= (typeof block !== 'undefined' && block === 'Mokama') ? 'selected' : '' %>>Mokama</option>
                            <option value="Naubatpur" <%= (typeof block !== 'undefined' && block === 'Naubatpur') ? 'selected' : '' %>>Naubatpur</option>
                            <option value="Paliganj" <%= (typeof block !== 'undefined' && block === 'Paliganj') ? 'selected' : '' %>>Paliganj</option>
                            <option value="Pandarak" <%= (typeof block !== 'undefined' && block === 'Pandarak') ? 'selected' : '' %>>Pandarak</option>
                            <option value="Patna Rural" <%= (typeof block !== 'undefined' && block === 'Patna Rural') ? 'selected' : '' %>>Patna Rural</option>
                            <option value="Phulwari Sharif" <%= (typeof block !== 'undefined' && block === 'Phulwari Sharif') ? 'selected' : '' %>>Phulwari Sharif</option>
                            <option value="Punpun" <%= (typeof block !== 'undefined' && block === 'Punpun') ? 'selected' : '' %>>Punpun</option>
                            <option value="Sampatchak" <%= (typeof block !== 'undefined' && block === 'Sampatchak') ? 'selected' : '' %>>Sampatchak</option>
                            <option value="Agiaon" <%= (typeof block !== 'undefined' && block === 'Agiaon') ? 'selected' : '' %>>Agiaon</option>
                            <option value="Arrah" <%= (typeof block !== 'undefined' && block === 'Arrah') ? 'selected' : '' %>>Arrah</option>
                            <option value="Barhara" <%= (typeof block !== 'undefined' && block === 'Barhara') ? 'selected' : '' %>>Barhara</option>
                            <option value="Behea" <%= (typeof block !== 'undefined' && block === 'Behea') ? 'selected' : '' %>>Behea</option>
                            <option value="Charpokhari" <%= (typeof block !== 'undefined' && block === 'Charpokhari') ? 'selected' : '' %>>Charpokhari</option>
                            <option value="Garhani" <%= (typeof block !== 'undefined' && block === 'Garhani') ? 'selected' : '' %>>Garhani</option>
                            <option value="Jagdishpur" <%= (typeof block !== 'undefined' && block === 'Jagdishpur') ? 'selected' : '' %>>Jagdishpur</option>
                            <option value="Koilwar" <%= (typeof block !== 'undefined' && block === 'Koilwar') ? 'selected' : '' %>>Koilwar</option>
                            <option value="Piro" <%= (typeof block !== 'undefined' && block === 'Piro') ? 'selected' : '' %>>Piro</option>
                            <option value="Sahar" <%= (typeof block !== 'undefined' && block === 'Sahar') ? 'selected' : '' %>>Sahar</option>
                            <option value="Sandesh" <%= (typeof block !== 'undefined' && block === 'Sandesh') ? 'selected' : '' %>>Sandesh</option>
                            <option value="Shahpur" <%= (typeof block !== 'undefined' && block === 'Shahpur') ? 'selected' : '' %>>Shahpur</option>
                            <option value="Tarari" <%= (typeof block !== 'undefined' && block === 'Tarari') ? 'selected' : '' %>>Tarari</option>
                            <option value="Udwant Nagar" <%= (typeof block !== 'undefined' && block === 'Udwant Nagar') ? 'selected' : '' %>>Udwant Nagar</option>
                            <option value="Barhampur" <%= (typeof block !== 'undefined' && block === 'Barhampur') ? 'selected' : '' %>>Barhampur</option>
                            <option value="Buxar" <%= (typeof block !== 'undefined' && block === 'Buxar') ? 'selected' : '' %>>Buxar</option>
                            <option value="Chakki" <%= (typeof block !== 'undefined' && block === 'Chakki') ? 'selected' : '' %>>Chakki</option>
                            <option value="Chausa" <%= (typeof block !== 'undefined' && block === 'Chausa') ? 'selected' : '' %>>Chausa</option>
                            <option value="Dumraon" <%= (typeof block !== 'undefined' && block === 'Dumraon') ? 'selected' : '' %>>Dumraon</option>
                            <option value="Itarhi" <%= (typeof block !== 'undefined' && block === 'Itarhi') ? 'selected' : '' %>>Itarhi</option>
                            <option value="Kesath" <%= (typeof block !== 'undefined' && block === 'Kesath') ? 'selected' : '' %>>Kesath</option>
                            <option value="Nawanagar" <%= (typeof block !== 'undefined' && block === 'Nawanagar') ? 'selected' : '' %>>Nawanagar</option>
                            <option value="Rajpur" <%= (typeof block !== 'undefined' && block === 'Rajpur') ? 'selected' : '' %>>Rajpur</option>
                            <option value="Simri" <%= (typeof block !== 'undefined' && block === 'Simri') ? 'selected' : '' %>>Simri</option>
                            <option value="Adhaura" <%= (typeof block !== 'undefined' && block === 'Adhaura') ? 'selected' : '' %>>Adhaura</option>
                            <option value="Bhabua" <%= (typeof block !== 'undefined' && block === 'Bhabua') ? 'selected' : '' %>>Bhabua</option>
                            <option value="Bhagwanpur" <%= (typeof block !== 'undefined' && block === 'Bhagwanpur') ? 'selected' : '' %>>Bhagwanpur</option>
                            <option value="Chainpur" <%= (typeof block !== 'undefined' && block === 'Chainpur') ? 'selected' : '' %>>Chainpur</option>
                            <option value="Chand" <%= (typeof block !== 'undefined' && block === 'Chand') ? 'selected' : '' %>>Chand</option>
                            <option value="Durgawati" <%= (typeof block !== 'undefined' && block === 'Durgawati') ? 'selected' : '' %>>Durgawati</option>
                            <option value="Kudra" <%= (typeof block !== 'undefined' && block === 'Kudra') ? 'selected' : '' %>>Kudra</option>
                            <option value="Mohania" <%= (typeof block !== 'undefined' && block === 'Mohania') ? 'selected' : '' %>>Mohania</option>
                            <option value="Rampur" <%= (typeof block !== 'undefined' && block === 'Rampur') ? 'selected' : '' %>>Rampur</option>
                            <option value="Ramgarh" <%= (typeof block !== 'undefined' && block === 'Ramgarh') ? 'selected' : '' %>>Ramgarh</option>
                            <option value="Other" <%= (typeof block !== 'undefined' && block === 'Other') ? 'selected' : '' %>>Other</option>
                        </select>
                    </div>

                    <!-- Address fields always visible -->
                    <div class="form-row two-col">
                        <label>House/House No</label>
                        <input name="houseNo" value="<%= typeof houseNo !== 'undefined' ? houseNo : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>Street</label>
                        <input name="street" value="<%= typeof street !== 'undefined' ? street : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>Panchayat</label>
                        <input name="panchayat" value="<%= typeof panchayat !== 'undefined' ? panchayat : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>Village</label>
                        <input name="village" value="<%= typeof village !== 'undefined' ? village : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>Pincode</label>
                        <input name="pincode" value="<%= typeof pincode !== 'undefined' ? pincode : '' %>">
                    </div>

                    <div class="form-row two-col">
                        <label>पासपोर्ट साइज फोटो *</label>
                        <input type="file" name="photo" accept="image/*" id="photoInput" <%= (typeof photoUrl === 'undefined' || !photoUrl) ? 'required' : '' %>>
                        <small class="hint">फाइल साइज 1MB से कम होनी चाहिए</small>
                    </div>

                    <div class="form-row two-col">
                        <label>Documents (Aadhaar + Character Certificate) *</label>
                        <input type="file" name="documents" accept="application/pdf" id="documentsInput" <%= (typeof documentsUrl === 'undefined' || !documentsUrl) ? 'required' : '' %>>
                        <small class="hint">एक PDF फाइल जिसमें Aadhaar और Character Certificate दोनों हों — फाइल साइज 1MB से कम</small>
                    </div> 

                    <div class="form-row full">
                        <label>संस्था से जुड़ने का उद्देश्य *</label>
                        <textarea name="reason" rows="5" required><%= typeof reason !== 'undefined' ? reason : '' %></textarea>
                    </div>

                    <div class="form-row full declaration">
                        <label><input type="checkbox" name="agreedToTerms" id="agreedToTerms" <%= typeof agreedToTerms !== 'undefined' && agreedToTerms ? 'checked' : '' %> required> मैं संस्था के नियमों का पालन करूंगा/करूंगी *</label>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submitBtn">आवेदन जमा करें</button>
                </form>
            </div>
                <div class="photo-preview" id="photoPreview">
                    <img alt="Preview" id="photoPreviewImg">
                </div>
                <div class="help">
                    <h4>Tips</h4>
                    <ul>
                        <li>सबमिट करने से पहले सभी * वाले फ़ील्ड भरें।</li>
                        <li>मोबाइल नंबर सही और चालू होना चाहिए।</li>
                        <li><strong>Aadhaar और Character Certificate दोनों एक ही PDF में अपलोड करें (1MB के नीचे)।</strong></li>
                    </ul>
                </div>
            </aside>
        </div>
    </div>
</section>

<script>
    (function(){
        const form = document.getElementById('membershipForm');
        const submitBtn = document.getElementById('submitBtn');
        const agreed = document.getElementById('agreedToTerms');
        const photoInput = document.getElementById('photoInput');
        const photoPreviewImg = document.getElementById('photoPreviewImg');

        form.addEventListener('submit', function(e){
            if (!agreed.checked) { e.preventDefault(); alert('कृपया घोषणा स्वीकार करें'); return; }
            submitBtn.disabled = true; submitBtn.textContent = 'सबमिट किया जा रहा है...';
        });

        if (photoInput) {
            photoInput.addEventListener('change', function(){
                const file = this.files && this.files[0];
                if (!file) return;
                if (!file.type.startsWith('image/')) { alert('Please select an image file'); this.value = ''; return; }
                // client-side size limit 1MB
                if (file.size > 1 * 1024 * 1024) { alert('Image too large. Maximum 1MB allowed.'); this.value = ''; return; }
                const reader = new FileReader();
                reader.onload = function(ev){ photoPreviewImg.src = ev.target.result; };
                reader.readAsDataURL(file);
            });
        }

        // Combined documents (Aadhaar + Character Certificate) client-side validation
        const documentsInput = document.getElementById('documentsInput');
        if (documentsInput) {
            documentsInput.addEventListener('change', function(){
                const f = this.files && this.files[0];
                if (!f) return;
                if (f.type !== 'application/pdf') { alert('Please upload a PDF containing Aadhaar and Character Certificate.'); this.value = ''; return; }
                if (f.size > 1 * 1024 * 1024) { alert('File too large. Maximum 1MB allowed.'); this.value = ''; return; }
            });
        }

        // mobile input sanitization
        const mobileInput = form.querySelector('input[name="mobile"]');
        if (mobileInput) {
            mobileInput.addEventListener('input', function(){ this.value = this.value.replace(/[^0-9+\s-]/g, ''); });
        }
    })();
</script>

<style>
    /* Join card layout */
    .join-card { display: grid; grid-template-columns: 1fr; gap: 30px; align-items: start; max-width: 1100px; margin: 0 auto; }
    .join-card-left { background: #fff; padding: 28px; border-radius: 12px; box-shadow: 0 6px 30px rgba(0,0,0,0.06); }
    .join-card-right { background: transparent; }
    .join-card h2 { margin-top: 0; color: #2b235f; }
    .lead { color: #555; margin-bottom: 18px; }
    .form-row { margin-bottom: 14px; }
    .form-row.two-col { display: inline-block; width: calc(50% - 10px); margin-right: 20px; }
    .form-row.full { display:block; width:100%; }
    .form-row label { display:block; font-weight:600; margin-bottom:6px; color:#2b235f; }
    .form-row input, .form-row textarea, .form-row select { width:100%; padding:10px 12px; border-radius:8px; border:1px solid #ddd; }
    .declaration { margin-top:10px; }
    .form-actions { display:flex; gap:12px; margin-top:18px; justify-content:center; }
    .photo-preview { background:#fff; padding:12px; border-radius:8px; box-shadow:0 4px 16px rgba(0,0,0,0.05); text-align:center; }
    .photo-preview img { width:200px; height:auto; border-radius:6px; }
    .help { margin-top:18px; font-size:0.95rem; color:#444; }

    @media (max-width: 900px) {
        .join-card { grid-template-columns: 1fr; }
        .form-row.two-col { width:100%; margin-right:0; }
        .photo-preview img { width:150px; }
    }
</style>